# Build stage
FROM maven:3.9.0-eclipse-temurin-17 AS builder
WORKDIR /app

# Copy pom.xml and mvnw files first (for caching dependencies)
COPY pom.xml mvnw ./
COPY .mvn .mvn

# Make mvnw executable
RUN chmod +x mvnw

# Copy source
COPY src ./src

# Build
RUN ./mvnw clean package -DskipTests
